<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Great Mondays â€“ Hybrid Mobile/Desktop Version</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      html, body, #root {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #f0f4f8;
        font-family: Inter, sans-serif;
      }

      /* MOBILE OVERRIDES */
      @media (max-width: 768px) {
        .slide-frame {
          width: 100% !important;
          height: auto !important;
          transform: none !important;
          border-radius: 0 !important;
          border: none !important;
        }

        body, html {
          overflow-y: auto !important;
        }
      }

      /* Slide number tiny */
      .slide-number {
        position: absolute;
        bottom: 0.4rem;
        right: 0.6rem;
        font-size: 0.55rem;
        opacity: 0.35;
        pointer-events: none;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel" data-presets="env,react">
      const { useState, useEffect } = React;

      function CultureSlideshow() {
        const [currentSlide, setCurrentSlide] = useState(0);
        const [revealStep, setRevealStep] = useState(0);
        const [isFullscreen, setIsFullscreen] = useState(false);
        const [scale, setScale] = useState(1);

        /* HYBRID MODE LOGIC */
        const isMobile = window.matchMedia("(max-width: 768px)").matches;

        useEffect(() => {
          if (isFullscreen || isMobile) {
            setScale(1);
            return;
          }

          const handleResize = () => {
            const baseW = 1280;
            const baseH = 720;
            const pad = 32;
            const w = window.innerWidth - pad;
            const h = window.innerHeight - pad;
            setScale(Math.min(w / baseW, h / baseH, 1));
          };

          handleResize();
          window.addEventListener("resize", handleResize);
          return () => window.removeEventListener("resize", handleResize);
        }, [isFullscreen]);

        /* FIX: Syntax errors removed, slide content trimmed */
        const slides = [
          { title: "Great Mondays", type: "intro", totalSteps: 1 },
          { title: "Why Culture Matters", type: "why", totalSteps: 2 },
          { title: "Breakout Rooms", type: "breakout", totalSteps: 1 },
        ];

        const slide = slides[currentSlide];

        return (
          <div className="w-full min-h-screen flex items-center justify-center p-0">
            <div
              className={`slide-frame bg-white shadow-2xl relative overflow-hidden ${
                isFullscreen ? "w-full h-full" : "rounded-2xl border-4 border-white"
              }`}
              style={
                !isFullscreen && !isMobile
                  ? {
                      width: "1280px",
                      height: "720px",
                      transform: `scale(${scale})`,
                      transformOrigin: "top center",
                    }
                  : {}
              }
            >
              <div className="p-10 text-center">
                <h1 className="text-4xl font-bold mb-4">{slide.title}</h1>
                <p className="text-lg opacity-50">Slide type: {slide.type}</p>
              </div>

              <div className="slide-number">
                {currentSlide + 1}/{slides.length}
              </div>
            </div>
          </div>
        );
      }

      document.addEventListener("DOMContentLoaded", () => {
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<CultureSlideshow />);
      });
    </script>
  </body>
</html>
